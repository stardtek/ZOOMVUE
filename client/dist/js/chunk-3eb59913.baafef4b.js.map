{"version":3,"sources":["webpack:///./node_modules/core-js/internals/object-get-own-property-names-external.js","webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./node_modules/core-js/internals/array-method-has-species-support.js","webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./node_modules/sdp/sdp.js","webpack:///./node_modules/core-js/modules/es.array.for-each.js","webpack:///./node_modules/core-js/internals/is-regexp.js","webpack:///./src/components/TextWindow.vue","webpack:///./src/components/TextWindow.vue?a1ef","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./src/components/MeCamera.vue?d584","webpack:///./node_modules/core-js/internals/array-species-create.js","webpack:///./node_modules/core-js/internals/define-well-known-symbol.js","webpack:///./src/views/Conference.vue","webpack:///./node_modules/webrtc-adapter/src/js/utils.js","webpack:///./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","webpack:///./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","webpack:///./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack:///./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js","webpack:///./node_modules/webrtc-adapter/src/js/edge/getusermedia.js","webpack:///./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js","webpack:///./node_modules/webrtc-adapter/src/js/edge/edge_shim.js","webpack:///./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","webpack:///./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","webpack:///./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack:///./node_modules/webrtc-adapter/src/js/safari/safari_shim.js","webpack:///./node_modules/webrtc-adapter/src/js/common_shim.js","webpack:///./node_modules/webrtc-adapter/src/js/adapter_factory.js","webpack:///./node_modules/webrtc-adapter/src/js/adapter_core.js","webpack:///./src/components/VideoChat.vue","webpack:///./src/components/MeCamera.vue","webpack:///./src/components/MeCamera.vue?5402","webpack:///./src/components/RtcCamera.vue","webpack:///./src/components/RtcCamera.vue?d416","webpack:///./src/components/VideoChat.vue?13f8","webpack:///./src/views/Conference.vue?411b","webpack:///./node_modules/core-js/internals/create-property.js","webpack:///./src/components/RtcCamera.vue?052d","webpack:///./src/components/TextWindow.vue?bfb8","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./node_modules/core-js/modules/es.symbol.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./node_modules/core-js/internals/array-method-uses-to-length.js","webpack:///./node_modules/core-js/internals/array-iteration.js","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./node_modules/core-js/modules/es.array.includes.js","webpack:///./node_modules/core-js/modules/es.symbol.description.js","webpack:///./node_modules/core-js/internals/well-known-symbol-wrapped.js","webpack:///./node_modules/core-js/internals/is-array.js","webpack:///./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js","webpack:///./node_modules/core-js/internals/dom-iterables.js"],"names":["toIndexedObject","nativeGetOwnPropertyNames","f","toString","windowNames","window","Object","getOwnPropertyNames","getWindowNames","it","error","slice","module","exports","call","global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","$forEach","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","callbackfn","this","arguments","length","undefined","fails","wellKnownSymbol","V8_VERSION","SPECIES","METHOD_NAME","array","constructor","foo","Boolean","$","notARegExp","requireObjectCoercible","correctIsRegExpLogic","target","proto","forced","includes","searchString","String","indexOf","SDPUtils","Math","random","substr","localCName","generateIdentifier","splitLines","blob","trim","split","map","line","splitSections","parts","part","index","getDescription","sections","getMediaSections","shift","matchPrefix","prefix","filter","parseCandidate","substring","candidate","foundation","component","parseInt","protocol","toLowerCase","priority","ip","address","port","type","i","relatedAddress","relatedPort","tcpType","ufrag","usernameFragment","writeCandidate","sdp","push","toUpperCase","join","parseIceOptions","parseRtpMap","parsed","payloadType","name","clockRate","channels","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","id","direction","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","j","writeFmtp","parameters","keys","params","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","value","parseSsrcGroup","semantics","ssrcs","getMid","mediaSection","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","getIceParameters","pwd","password","writeIceParameters","parseRtpParameters","description","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","kind","caps","maxptime","extension","parseRtpEncodingParameters","secondarySsrc","encodingParameters","hasRed","hasUlpfec","primarySsrc","flows","apt","encParam","codecPayloadType","rtx","JSON","parse","stringify","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","remoteSsrc","obj","cname","rsize","reducedSize","compound","mux","parseMsid","spec","stream","track","planB","msidParts","parseSctpDescription","maxMessageSize","parseMLine","maxSizeLine","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","sctp","output","generateSessionId","writeSessionBoilerplate","sessId","sessVer","sessUser","sessionId","version","user","writeMediaSection","transceiver","iceGatherer","getLocalParameters","dtlsTransport","rtpSender","rtpReceiver","msid","sendEncodingParameters","getDirection","getKind","isRejected","parseOLine","username","sessionVersion","netType","addressType","isValidSDP","charAt","isObject","classof","MATCH","isRegExp","class","for","users","indexUsers","ref","key","messages","msg","message","e","closest","classList","add","send","props","data","WebSocket","mounted","onopen","event","console","log","onmessage","disconected","splice","addEventListener","methods","$refs","newMessage","group","$route","computed","logedStatus","localStorage","getItem","logedName","rand","floor","render","TypeError","isArray","originalArray","C","Array","path","has","wrappedWellKnownSymbolModule","defineProperty","NAME","Symbol","src","width","alt","data-mdb-toggle","data-mdb-target","aria-controls","aria-expanded","aria-label","to","logout","conferenceId","selectRoom","room","remove","logDisabled_","deprecationWarnings_","extractVersion","uastring","expr","pos","match","wrapPeerConnectionEvent","eventNameToWrap","wrapper","RTCPeerConnection","nativeAddEventListener","nativeEventName","cb","apply","wrappedCallback","modifiedEvent","handleEvent","_eventMap","Map","set","nativeRemoveEventListener","removeEventListener","unwrappedCb","get","delete","size","enumerable","configurable","disableLog","bool","Error","disableWarnings","deprecated","oldMethod","newMethod","warn","detectBrowser","result","browser","navigator","mozGetUserMedia","userAgent","webkitGetUserMedia","isSecureContext","webkitRTCPeerConnection","RTCIceGatherer","mediaDevices","supportsUnifiedPlan","RTCRtpTransceiver","val","compactObject","reduce","accumulator","isObj","isEmptyObject","assign","walkStats","stats","base","resultSet","endsWith","filterStats","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","trackId","shimGetUserMedia","browserDetails","constraintsToChrome_","c","mandatory","optional","cc","r","ideal","exact","min","max","oldname_","oc","mix","advanced","concat","shimConstraints_","constraints","func","audio","remap","a","b","video","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","then","devices","d","dev","find","some","label","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","constraint","constraintName","getUserMedia_","onSuccess","onError","getUserMedia","bind","origGetUserMedia","cs","getAudioTracks","getVideoTracks","getTracks","stop","DOMException","Promise","reject","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","shimMediaStream","MediaStream","webkitMediaStream","shimOnTrack","_ontrack","origSetRemoteDescription","setRemoteDescription","_ontrackpoly","te","receiver","getReceivers","Event","streams","dispatchEvent","shimGetSendersWithDtmf","shimSenderWithDtmf","pc","_dtmf","createDTMFSender","_pc","getSenders","_senders","origAddTrack","addTrack","sender","origRemoveTrack","removeTrack","idx","origAddStream","addStream","origRemoveStream","removeStream","s","RTCRtpSender","origGetSenders","senders","shimGetStats","origGetStats","getStats","selector","onSucc","onErr","fixChromeStats_","response","standardReport","reports","report","standardStats","timestamp","localcandidate","remotecandidate","names","stat","makeMapStats","successCallbackWrapper_","resolve","shimSenderReceiverGetStats","RTCRtpReceiver","origGetReceivers","receivers","srcElement","MediaStreamTrack","err","shimAddTrackRemoveTrackWithNative","getLocalStreams","_shimmedLocalStreams","streamId","alreadyExists","existingSenders","newSenders","newSender","shimAddTrackRemoveTrack","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","replaceInternalStreamId","internalId","externalStream","internalStream","replace","RegExp","RTCSessionDescription","replaceExternalStreamId","signalingState","t","oldStream","method","nativeMethod","methodObj","args","isLegacyCall","desc","origSetLocalDescription","setLocalDescription","origLocalDescription","getOwnPropertyDescriptor","isLocal","streamid","hasTrack","shimPeerConnection","addIceCandidateNullSupported","addIceCandidate","RTCIceCandidate","nativeAddIceCandidate","fixNegotiationNeeded","getConfiguration","sdpSemantics","filterIceServers","iceServers","edgeVersion","hasTurn","server","urls","url","isString","validTurn","startsWith","catch","origMSTEnabled","ev","enabled","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","config","shimReplaceTrack","replaceTrack","setTrack","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","code","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","ridRegex","test","rid","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","getParameters","encodings","setParameters","shimGetParameters","origGetParameters","shimCreateOffer","origCreateOffer","createOffer","all","finally","shimCreateAnswer","origCreateAnswer","createAnswer","shimLocalStreamsAPI","_localStreams","_addTrack","tracks","shimRemoteStreamsAPI","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","successCallback","failureCallback","options","promise","withCallback","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","hasOwnProperty","generateCertificate","shimTrackEventTransceiver","shimCreateOfferLegacy","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","setDirection","offerToReceiveVideo","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext","shimRTCIceCandidate","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","toJSON","sdpMid","sdpMLineIndex","writable","shimMaxMessageSize","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","shimSendThrowTypeError","wrapDcSend","dc","origDataChannelSend","byteLength","readyState","origCreateDataChannel","createDataChannel","dataChannel","channel","shimConnectionState","completed","checking","iceConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","removeAllowExtmapMixed","nativeSRD","adapterFactory","shimChrome","shimFirefox","shimEdge","shimSafari","logging","adapter","commonShim","browserShim","you","shouldOffer","autoplay","muted","camera","srcObject","play","__scopeId","rtcPeer","rtcPeerCandidatesQueue","ws","connectTo","sendOffer","sendAnswer","onicecandidate","remoteDescription","ontrack","setInterval","offer","localDescription","from","answer","components","MeCamera","RtcCamera","userIndex","findIndex","TextWindow","VideoChat","getParam","$router","location","reload","removeItem","watch","toPrimitive","definePropertyModule","createPropertyDescriptor","object","propertyKey","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","ACCESSORS","0","1","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","start","deleteCount","insertCount","actualDeleteCount","A","k","O","len","actualStart","argumentsLength","getBuiltIn","IS_PURE","DESCRIPTORS","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","anObject","nativeObjectCreate","objectKeys","getOwnPropertyNamesModule","getOwnPropertyNamesExternal","getOwnPropertySymbolsModule","getOwnPropertyDescriptorModule","propertyIsEnumerableModule","redefine","shared","sharedKey","hiddenKeys","uid","defineWellKnownSymbol","setToStringTag","InternalStateModule","HIDDEN","SYMBOL","PROTOTYPE","TO_PRIMITIVE","setInternalState","getInternalState","getterFor","ObjectPrototype","$Symbol","$stringify","nativeGetOwnPropertyDescriptor","nativeDefineProperty","nativePropertyIsEnumerable","AllSymbols","ObjectPrototypeSymbols","StringToSymbolRegistry","SymbolToStringRegistry","WellKnownSymbolsStore","QObject","USE_SETTER","findChild","setSymbolDescriptor","P","Attributes","ObjectPrototypeDescriptor","wrap","symbol","isSymbol","$defineProperty","$defineProperties","Properties","properties","$getOwnPropertySymbols","$propertyIsEnumerable","$create","V","$getOwnPropertyDescriptor","descriptor","$getOwnPropertyNames","IS_OBJECT_PROTOTYPE","setter","unsafe","sham","string","keyFor","sym","useSetter","useSimple","create","defineProperties","getOwnPropertySymbols","FORCED_JSON_STRINGIFY","replacer","space","$replacer","valueOf","argument","regexp","error1","error2","cache","thrower","argument0","argument1","IndexedObject","createMethod","TYPE","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_OUT","NO_HOLES","$this","that","specificCreate","self","boundFunction","every","filterOut","$findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","$includes","el","copyConstructorProperties","NativeSymbol","EmptyStringDescriptionStore","SymbolWrapper","symbolPrototype","symbolToString","native","arg","fixStatsType","dtlsRole","_initialTrackId","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","findCodecByPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","rCodec","lHeaderExtension","rHeaderExtension","isActionAllowedInSignalingState","action","maybeAddCandidate","iceTransport","alreadyAdded","getRemoteCandidates","remoteCandidate","addRemoteCandidate","makeError","NotSupportedError","InvalidAccessError","OperationError","addTrackToStreamAndFireEvent","MediaStreamTrackEvent","removeTrackFromStreamAndFireEvent","fireAddTrack","trackEvent","setTimeout","_dispatchEvent","_eventTarget","document","createDocumentFragment","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","_iceGatherers","iceCandidatePoolSize","gatherPolicy","_config","transceivers","_sdpSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onaddstream","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","clonedStream","clone","clonedTrack","_createIceGatherer","bufferedCandidateEvents","bufferCandidates","end","state","_gather","onlocalcandidate","evt","cand","serializedCandidate","complete","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","recv","p","receive","isIceLite","rejected","remoteIceParameters","remoteDtlsParameters","_updateSignalingState","receiverList","iceOptions","remoteMsid","isComplete","cands","setTransport","setRemoteCandidates","hasRtx","default","getCapabilities","isNewTrack","nativeTrack","sid","item","close","newState","states","closed","connected","disconnected","failed","new","connecting","numAudioTracks","numVideoTracks","remoteCodec","hdrExt","remoteExtensions","rHdrExt","getLocalCandidates","mediaSectionsInOffer","localTrack","candidateString","senderOrReceiver","promises","allStats","results","ortcObjects","ortcObjectName","nativeGetstats","nativeStats","mapStats","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList"],"mappings":"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","file":"js/chunk-3eb59913.baafef4b.js","sourcesContent":["var toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyNames = require('../internals/object-get-own-property-names').f;\n\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return nativeGetOwnPropertyNames(it);\n  } catch (error) {\n    return windowNames.slice();\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]'\n    ? getWindowNames(it)\n    : nativeGetOwnPropertyNames(toIndexedObject(it));\n};\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = (!STRICT_METHOD || !USES_TO_LENGTH) ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  var parts = keyParams.substr(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES paramters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substr(12),\n    password: pwd.substr(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(obj) {\n      return obj.attribute === 'cname';\n    })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  var mline = SDPUtils.parseMLine(mediaSection);\n  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  var maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize: maxMessageSize\n    };\n  }\n  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize: maxMessageSize\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  var output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n'\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n    transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n    transceiver.dtlsTransport.getLocalParameters(),\n    type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.github.io/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","<template>\n  <div class=\"card\">\n    <div class=\"active-users\">\n      <div class=\"card-body\">\n        <div class=\"card-title\">\n          <h3>Active users:</h3>\n        </div>\n        <ul ref=\"usersDiv\" v-for=\"(user, indexUsers) in users\" :key=\"indexUsers\"\n            class=\"list-group list-group-flush\"\n        >\n          <li class=\"list-group-item\">\n            <span class=\"font-weight-bold\">{{ user === username ? user + ' (You)' : user }}</span>\n          </li>\n        </ul>\n      </div>\n    </div>\n      <div class=\"card-body p-0\">\n          <div class=\"card-title\">\n              <h3>Chat Group</h3>\n              <hr>\n          </div>\n          <div class=\"card-body overflow-auto\" id=\"message-list\">\n            <ul class=\"list-group list-group-flush\">\n              <li class=\"list-group-item\" v-for=\"(msg, index) in messages\" :key=\"index\">\n                <div v-if=\"username === msg.username\"\n                     class=\"float-end font-weight-bold text-break text-right text-end\"\n                >\n                  {{ msg.message }}\n                </div>\n                <div v-else class=\"float-start text-justify text-break text-left text-start\">\n                    <span class=\"font-weight-bold\">\n                      {{ msg.username }}:\n                    </span>\n                    {{ msg.message }}\n                </div>\n              </li>\n            </ul>\n          </div>\n      </div>\n      <div class=\"card-footer\">\n          <form @submit.prevent class=\"pb-3\">\n              <div class=\"form-outline pb-3\">\n                  <input\n                    ref=\"newMessage\"\n                    type=\"text\"\n                    class=\"form-control border-start border-bottom border-end\"\n                    @focusin=\"(e) => {e.target.closest('input').classList.add('border-primary');}\"\n                    @focusout=\"(e) => {\n                      e.target.closest('input').classList.remove('border-primary');\n                    }\"\n                    id=\"message\">\n                  <label class=\"form-label\" for=\"message\">Message</label>\n              </div>\n              <button v-on:click=\"send\"\n                      type=\"submit\"\n                      class=\"btn btn-green btn-block\"\n              >Send</button>\n          </form>\n      </div>\n    </div>\n</template>\n\n<script>\n\n/*\n<div v-for=\"(user, index) in users\" :key=\"index\">\n          <p><span class=\"font-weight-bold\">{{ user.username }}</span></p>\n      </div>\n*/\n\n// TODO add room number with send message for server to know who to send to\n\nexport default {\n  /* eslint-disable no-console */\n  name: 'TextWindow',\n\n  props: [\n    'username',\n\n  ],\n\n  data: () => ({\n    WebSocket: new WebSocket(process.env.VUE_APP_CHAT_WS_URL),\n    messages: [],\n    users: [],\n  }),\n\n  mounted() {\n    // eslint-disable-next-line no-unused-vars\n    this.WebSocket.onopen = (event) => {\n      // eslint-disable-next-line no-console\n      console.log('Open ');\n\n      // const data = JSON.parse(event.data);\n      this.users.push(this.username);\n      // console.log(event);\n    };\n\n    this.WebSocket.onmessage = (event) => {\n      // eslint-disable-next-line no-console\n      // console.log('message get ', event);\n      const data = JSON.parse(event.data);\n      console.log(data, 'data');\n      if (data.disconected) {\n        console.log('Izbriše');\n        for (let i = 0; i < this.users.length; i += 1) {\n          if (this.users[i] === data.username) {\n            this.users.splice(i, 1);\n          }\n        }\n      } else {\n        // try to update on new user\n        if (!this.users.includes(data.username)) {\n          this.users.push(data.username);\n          // this.forceRerender();\n        }\n        this.messages.push(data);\n      }\n      console.log(this.users);\n    };\n    this.WebSocket.addEventListener('close', () => {\n      // eslint-disable-next-line no-console\n      console.log('WebSocket is closed!!!');\n    });\n  },\n\n  methods: {\n    // eslint-disable-next-line no-unused-vars\n    send(event) {\n      if (this.$refs.newMessage.value === '') return;\n      const data = JSON.stringify({\n        username: this.username,\n        message: this.$refs.newMessage.value,\n        group: this.$route.params.id,\n      });\n      this.$refs.newMessage.value = '';\n      this.WebSocket.send(data);\n    },\n\n  },\n\n  computed: {\n    logedStatus: () => {\n      if (localStorage.getItem('user')) {\n        return true;\n      }\n      return false;\n    },\n    logedName: () => {\n      // console.log('pride sm');\n      if (localStorage.getItem('user')) {\n        return localStorage.getItem('user');\n      }\n\n      // eslint-disable-next-line prefer-template\n      const rand = 'Random user' + Math.floor(Math.random() * 100);\n      return rand;\n    },\n  },\n\n};\n</script>\n\n<style>\n#message-list {\n  height: 50vh;\n}\n\n</style>\n","import { render } from \"./TextWindow.vue?vue&type=template&id=5b29c1ba\"\nimport script from \"./TextWindow.vue?vue&type=script&lang=js\"\nexport * from \"./TextWindow.vue?vue&type=script&lang=js\"\n\nimport \"./TextWindow.vue?vue&type=style&index=0&id=5b29c1ba&lang=css\"\nscript.render = render\n\nexport default script","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MeCamera.vue?vue&type=style&index=0&id=00b811ed&scoped=true&lang=css\"","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","var path = require('../internals/path');\nvar has = require('../internals/has');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (NAME) {\n  var Symbol = path.Symbol || (path.Symbol = {});\n  if (!has(Symbol, NAME)) defineProperty(Symbol, NAME, {\n    value: wrappedWellKnownSymbolModule.f(NAME)\n  });\n};\n","<template>\n<div>\n  <div>\n      <nav class=\"navbar navbar-expand-lg navbar-expand-md navbar-light\">\n    <div class=\"container-fluid\">\n      <router-link class=\"navbar-brand\" id=\"logo\" to=\"/\">\n        <img src=\"@/assets/logo.png\" class=\"img-fluid\" width=\"100\" alt=\"LOGO\"/>\n      </router-link>\n      <button\n        class=\"navbar-toggler\"\n        type=\"button\"\n        data-mdb-toggle=\"collapse\"\n        data-mdb-target=\"#navbarText\"\n        aria-controls=\"navbarText\"\n        aria-expanded=\"false\"\n        aria-label=\"Toggle navigation\"\n      >\n        <span class=\"fas fa-bars\"></span>\n      </button>\n      <div class=\"collapse navbar-collapse\" id=\"navbarText\">\n        <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n          <li class=\"nav-item\">\n            <router-link class=\"nav-item btn btn-smoke m-1\" to=\"/\">\n              Home\n            </router-link>\n          </li>\n          <li class=\"nav-item\">\n            <router-link class=\"nav-item btn btn-smoke m-1\" to=\"/about\">\n              About\n            </router-link>\n          </li>\n          <li class=\"nav-item\">\n            <router-link class=\"nav-item btn btn-smoke m-1\" to=\"/chat\">\n              Chat\n            </router-link>\n          </li>\n          <li class=\"nav-item\" v-if=\"logedStatus === true\">\n            <router-link class=\"nav-item btn btn-smoke m-1\" to=\"/private\">\n              Private chat\n            </router-link>\n          </li>\n          <li class=\"nav-item\">\n            <router-link class=\"nav-item btn btn-smoke m-1\" to=\"/conference\">\n              Conference\n            </router-link>\n          </li>\n        </ul>\n        <div class=\"mb-2 mb-lg-0\">\n          <div v-if=\"logedStatus === false\">\n            <router-link class=\"btn btn-smoke m-1\" to=\"/login\">\n              Login\n            </router-link>\n            <router-link class=\"btn btn-smoke m-1\" to=\"/register\">\n              Register\n            </router-link>\n          </div>\n          <div v-else>\n            <form @submit.prevent=\"logout\">\n              <button class=\"btn btn-dark m-1\" type=\"submit\">Logout</button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </nav>\n    </div>\n  <div class=\"container pt-5\" v-if=\"!conferenceId\">\n    <div class=\"row\">\n      <div class=\"col\">\n        <h3>Please enter Room ID to enter conference</h3>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-4 col-lg-4\"></div>\n      <div class=\"col col-md-4 col-lg-4\">\n        <form @submit.prevent=\"selectRoom\" class=\"form-group\">\n          <div class=\"form-outline my-4\">\n            <input\n              v-model=\"room\"\n              type=\"text\"\n              id=\"roomId\"\n              class=\"form-control form-control-lg border-start border-bottom border-end\"\n              @focusin=\"(e) => {e.target.closest('input').classList.add('border-primary');}\"\n              @focusout=\"(e) => {e.target.closest('input').classList.remove('border-primary');}\"\n            />\n            <label class=\"form-label\" for=\"roomId\">Room ID</label>\n          </div>\n          <button type=\"submit\" class=\"btn btn-green btn-block\">Login</button>\n        </form>\n      </div>\n      <div class=\"col-md-4 col-lg-4\"></div>\n    </div>\n  </div>\n  <div class=\"container-fluid py-5\" v-else>\n    <div class=\"row\">\n      <div class=\"col-sm-6 col-md-9 col-lg-9\">\n        <video-chat v-bind:username=\"logedName\"\n                    v-bind:group=\"conferenceId\"\n        ></video-chat>\n      </div>\n      <div class=\"col-sm-6 col-md-3 col-lg-3\">\n        <text-window v-bind:username=\"logedName\"></text-window>\n      </div>\n    </div>\n  </div>\n  <div>\n    <footer class=\"align-items-center\">\n      <div class=\"text-center\">\n        © 2020 Copyright: HOGS Saloon\n      </div>\n    </footer>\n  </div>\n</div>\n</template>\n\n<script>\n// adapter just makes sure that all webRTC function names are the same across all browsers\n// eslint-disable-next-line no-unused-vars\nimport adapter from 'webrtc-adapter';\nimport VideoChat from '@/components/VideoChat.vue';\nimport TextWindow from '@/components/TextWindow.vue';\n\nexport default {\n  name: 'conference',\n\n  data: () => ({\n    conferenceId: '',\n    room: '',\n  }),\n\n  components: {\n    TextWindow,\n    VideoChat,\n  },\n\n  mounted() {\n    this.getParam();\n  },\n\n  computed: {\n    logedStatus: () => {\n      if (localStorage.getItem('user')) {\n        return true;\n      }\n      return false;\n    },\n    logedName: () => {\n      // console.log('pride sm');\n      if (localStorage.getItem('user')) {\n        return localStorage.getItem('user');\n      }\n\n      const rand = `Random user ${Math.floor(Math.random() * 100)}`;\n      return rand;\n    },\n  },\n  methods: {\n    selectRoom() {\n      this.$router.push({ name: 'ConferenceId', params: { id: this.room } });\n    },\n    getParam() {\n      if (this.conferenceId) {\n        // make sure page reloads when you exit or change conference room\n        // otherwise your camera stays connected to the chat instead of disconnecting\n        window.location.reload();\n      }\n\n      this.conferenceId = this.$route.params.id;\n      // eslint-disable-next-line no-console\n      console.log('route changed');\n    },\n    logout() {\n      localStorage.removeItem('user');\n      this.$router.push('/login');\n    },\n  },\n  watch: {\n    // when redirect to new category_name, this will be callback\n    $route: 'getParam',\n  },\n};\n</script>\n\n<style>\n\n</style>\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection &&\n       !window.RTCIceGatherer)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices &&\n      navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent,\n        /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const browserDetails = utils.detectBrowser(window);\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n          this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const addIceCandidateNullSupported =\n    window.RTCPeerConnection.prototype.addIceCandidate.length === 0;\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  // support for addIceCandidate(null or undefined)\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!addIceCandidateNullSupported && !arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions. Native support planned for Chrome M77.\n      if (browserDetails.version < 78 &&\n        arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window) {\n  const browserDetails = utils.detectBrowser(window);\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nexport function filterIceServers(iceServers, edgeVersion) {\n  let hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(server => {\n    if (server && (server.urls || server.url)) {\n      let urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      const isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(url => {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        const validTurn = url.startsWith('turn') &&\n            !url.startsWith('turn:[') &&\n            url.includes('transport=udp');\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return validTurn && !hasTurn;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  const shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(e => Promise.reject(shimError_(e)));\n  };\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    window.navigator.getDisplayMedia.bind(window.navigator);\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nimport {filterIceServers} from './filtericeservers';\nimport shimRTCPeerConnection from 'rtcpeerconnection-shim';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      const origMSTEnabled = Object.getOwnPropertyDescriptor(\n          window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set(value) {\n          origMSTEnabled.set.call(this, value);\n          const ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  const RTCPeerConnectionShim = shimRTCPeerConnection(window,\n      browserDetails.version);\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = filterIceServers(config.iceServers,\n        browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nexport function shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender &&\n      !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack =\n        window.RTCRtpSender.prototype.setTrack;\n  }\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window) {\n  const browserDetails = utils.detectBrowser(window);\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  // support for addIceCandidate(null or undefined)\n  // as well as ignoring {sdpMid, candidate: \"\"}\n  if (browserDetails.version < 68) {\n    const nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      if (arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        const initParameters = arguments[1];\n        const shouldPerformCheck = initParameters &&\n                                  'sendEncodings' in initParameters;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          initParameters.sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = initParameters.sendEncodings;\n            sender.sendEncodings = initParameters.sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateOffer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateAnswer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio');\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeAllowExtmapMixed(window) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      desc.sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n  // Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as edgeShim from './edge/edge_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimEdge: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimGetStats(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n      firefoxShim.shimAddTransceiver(window);\n      firefoxShim.shimGetParameters(window);\n      firefoxShim.shimCreateOffer(window);\n      firefoxShim.shimCreateAnswer(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimGetDisplayMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n      safariShim.shimAudioContext(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter =\n  adapterFactory({window: typeof window === 'undefined' ? undefined : window});\nexport default adapter;\n","<template>\n  <div class=\"m-1\">\n    <div class=\"row row-cols-1 row-cols-md-2 row-cols-lg-3\">\n      <div class=\"col\">\n        <me-camera v-bind:username=\"username\"></me-camera>\n      </div>\n      <div class=\"col\"  v-for=\"user in users\" :key=\"user.username\">\n        <rtc-camera v-bind:you=\"username\"\n                    v-bind:user=\"user.username\"\n                    v-bind:group=\"group\"\n                    v-bind:shouldOffer=\"user.shouldOffer\"\n        ></rtc-camera>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport MeCamera from './MeCamera.vue';\nimport RtcCamera from './RtcCamera.vue';\n\nexport default {\n  name: 'VideoChat',\n\n  props: [\n    // your username\n    /** @type {string} */\n    'username',\n\n    // group ID\n    /** @type {string} */\n    'group',\n  ],\n\n  data: () => ({\n    /**\n     * Expected user format\n     *\n     * {\n     *   username: string,\n     *   shouldOffer: boolean, default false\n     * }\n     *\n     */\n    users: [],\n    ws: new WebSocket(process.env.VUE_APP_CONFERENCE_WS_URL),\n  }),\n\n  components: {\n    MeCamera,\n    RtcCamera,\n  },\n\n  mounted() {\n    // Connection opened\n    this.ws.onopen = () => {\n      // eslint-disable-next-line no-console\n      console.log('Websocket opened from conference!!!');\n      // let other users know you joined\n      this.ws.send(JSON.stringify({\n        username: this.username,\n        group: this.group,\n        type: 'user-joined',\n      }));\n    };\n\n    // Listen for messages\n    this.ws.onmessage = (event) => {\n      // Load users video frame\n      // eslint-disable-next-line no-unused-vars\n      const data = JSON.parse(event.data);\n      if (!data.type) return;\n\n      switch (data.type) {\n        // new user joined\n        case 'user-joined':\n          if (data.users) {\n            // you joined, get names of other users in chat\n            data.users.forEach((user) => {\n              // you receive peer connection offer from users already in chat\n              this.users.push({\n                username: user,\n                shouldOffer: false,\n              });\n            });\n          } else if (data.username) {\n            // you are already in chat and new user joined\n            // you offer peer connection to new user\n            this.users.push({\n              username: data.username,\n              shouldOffer: true,\n            });\n          }\n          break;\n\n        case 'user-disconnected':\n          if (data.username) {\n            const userIndex = this.users.findIndex((user) => user.username === data.username);\n            if (userIndex !== -1) {\n              this.users.splice(userIndex, 1);\n            }\n\n            // eslint-disable-next-line no-console\n            console.log('user disconnected', data.username);\n            // eslint-disable-next-line no-console\n            console.log(this.users);\n          }\n          break;\n\n        default:\n          break;\n      }\n    };\n  },\n};\n</script>\n\n<style scoped>\n\n</style>\n","<template>\n  <div class=\"card m-1\">\n    <video class=\"card-img-top\" ref=\"camera\" autoplay muted>No video available</video>\n    <div class=\"card-body\">\n      <h4 class=\"card-title font-weight-bold\">{{ username }}</h4>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'MeCamera',\n\n  props: [\n    // your username\n    /** @type {string} */\n    'username',\n  ],\n\n  mounted() {\n    // Get access to the camera!\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true,\n      }).then((stream) => {\n        this.$refs.camera.srcObject = stream;\n        this.$refs.camera.play();\n      }).catch((error) => {\n        // eslint-disable-next-line no-console\n        console.log(error);\n      });\n    }\n  },\n};\n</script>\n\n<style scoped>\n\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n</style>\n","import { render } from \"./MeCamera.vue?vue&type=template&id=00b811ed&scoped=true\"\nimport script from \"./MeCamera.vue?vue&type=script&lang=js\"\nexport * from \"./MeCamera.vue?vue&type=script&lang=js\"\n\nimport \"./MeCamera.vue?vue&type=style&index=0&id=00b811ed&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-00b811ed\"\n\nexport default script","<template>\n  <div class=\"card m-1\">\n    <video  class=\"card-img-top\" ref=\"camera\" autoplay>\n      No video available\n    </video>\n    <div class=\"card-body\">\n      <h4 class=\"card-title font-weight-bold\">{{ user }}</h4>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'rtcCamera',\n\n  props: [\n    // your username\n    /** @type {string} */\n    'you',\n\n    // remote users username\n    /** @type {string} */\n    'user',\n\n    // group ID\n    /** @type {string} */\n    'group',\n\n    // Should this RTC peer send offer or receive offer from other side?\n    /** @type {boolean} */\n    'shouldOffer',\n  ],\n\n  data: () => ({\n    /**\n     * Data format send thru websocket to establish RTC connection\n     * {\n     *   from: string - caller,\n     *   to: string - called,\n     *   group: string - group id,\n     *   type: 'offer | answer | video-ready',\n     *   description: RTC localDescription\n     * }\n     */\n\n    rtcPeer: new RTCPeerConnection({\n      iceServers: [\n        {\n          // STUN servers are needed to establish connection via public IPs\n          urls: [\n            'stun:stun.l.google.com:19302',\n            'stun:stun1.l.google.com:19302',\n            'stun:stun2.l.google.com:19302',\n            'stun:stun3.l.google.com:19302',\n          ],\n        },\n      ],\n    }),\n\n    // sometimes RTC try to add Ice Candidates before remote user is set\n    // this triggers error in Chrome, so we queue those candidates and add then later\n    // when remote user is set\n    rtcPeerCandidatesQueue: [],\n\n    ws: new WebSocket(process.env.VUE_APP_CONFERENCE_WS_URL),\n  }),\n\n  mounted() {\n    // eslint-disable-next-line no-console\n    console.log(this.rtcPeer);\n\n    // Get access to the camera!\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true,\n      }).then((stream) => {\n        stream.getTracks().forEach((track) => {\n          this.rtcPeer.addTrack(track, stream);\n          // eslint-disable-next-line no-console\n          console.log(stream);\n        });\n      }).catch((error) => {\n        // eslint-disable-next-line no-console\n        console.log(error);\n      });\n    }\n\n    this.ws.onopen = () => {\n      // every pair of users in chat have peer-to-peer connection between them\n      this.ws.send(JSON.stringify({\n        username: this.you,\n        connectTo: this.user,\n        group: this.group,\n        type: 'video-ready',\n      }));\n\n      if (this.shouldOffer) {\n        this.sendOffer();\n      }\n    };\n\n    this.ws.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n\n      switch (data.type) {\n        // offer came from remote user, send back RTC answer\n        case 'offer':\n          // eslint-disable-next-line no-console\n          console.log(data.description);\n          this.rtcPeer.setRemoteDescription(data.description).then(() => {\n            this.sendAnswer(data);\n          }).catch((error) => {\n            // eslint-disable-next-line no-console\n            console.log(error);\n          });\n          break;\n\n        // answer came from remote user, confirm connection with remote user\n        case 'answer':\n          this.rtcPeer.setRemoteDescription(data.description).then(() => {\n            // eslint-disable-next-line no-console\n            console.log('rtc should be done!!!');\n            // eslint-disable-next-line no-console\n            console.log(data.description);\n          }).catch((error) => {\n            // eslint-disable-next-line no-console\n            console.log(error);\n          });\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    this.rtcPeer.onicecandidate = (event) => {\n      // this needs to wait for remote user to be set before you add candidates\n      // otherwise Chrome throw errors\n      if (!this.rtcPeer || !this.rtcPeer.remoteDescription\n        || !this.rtcPeer.remoteDescription.type) {\n        this.rtcPeerCandidatesQueue.push(event.candidate);\n        return;\n      }\n\n      this.rtcPeer.addIceCandidate(event.candidate).then(() => {\n        // eslint-disable-next-line no-console\n        console.log('rtcPeer added ice candidate');\n      }).catch((error) => {\n        // eslint-disable-next-line no-console\n        console.log(error);\n      });\n    };\n\n    // we got video/audio from remote user\n    this.rtcPeer.ontrack = (event) => {\n      if (event.streams.length === 0) {\n        // eslint-disable-next-line no-console\n        console.log('ontrack no stream available');\n        return;\n      }\n\n      // eslint-disable-next-line prefer-destructuring\n      this.$refs.camera.srcObject = event.streams[0];\n    };\n\n    // TODO this interval should be stopped when camera connection succeeds\n    setInterval(() => {\n      // eslint-disable-next-line no-console\n      console.log('rtcPeer', this.rtcPeer.connectionState);\n      // eslint-disable-next-line no-console\n      console.log('ice state', this.rtcPeer.iceConnectionState);\n\n      // check for Ice Candidates in queue and add them to connection\n      if ((this.rtcPeer.connectionState === 'new' || this.rtcPeer.connectionState === 'connecting'\n        || this.rtcPeer.iceConnectionState === 'checking')\n        && this.rtcPeerCandidatesQueue.length !== 0) {\n        this.rtcPeerCandidatesQueue.forEach((candidate) => {\n          this.rtcPeer.addIceCandidate(candidate).then(() => {\n            // eslint-disable-next-line no-console\n            console.log('rtcPeer added ice candidate on state change');\n          }).then(() => {\n            this.rtcPeerCandidatesQueue.length = 0;\n          }).catch((error) => {\n            // eslint-disable-next-line no-console\n            console.log(error);\n          });\n        });\n      }\n\n      if (this.shouldOffer) {\n        // for whatever reason offer <-> answer needs to happen a few times...\n        this.sendOffer();\n      }\n    }, 5000);\n  },\n\n  methods: {\n    /**\n     * Send RTC offer to remote user\n     */\n    sendOffer() {\n      this.rtcPeer.createOffer({\n        offerToReceiveAudio: 1,\n        offerToReceiveVideo: 1,\n      }).then((offer) => {\n        this.rtcPeer.setLocalDescription(offer).then(() => {\n          // eslint-disable-next-line no-console\n          console.log(this.rtcPeer.localDescription);\n          this.ws.send(JSON.stringify({\n            from: this.you,\n            to: this.user,\n            group: this.group,\n            type: 'offer',\n            description: this.rtcPeer.localDescription,\n          }));\n          // eslint-disable-next-line no-console\n          console.log('rtc offer sent');\n        }).catch((error) => {\n          // eslint-disable-next-line no-console\n          console.log(error);\n        });\n      });\n    },\n\n    /**\n     * Send RTC answer to remote user\n     * @param data JSON data from remote user\n     */\n    sendAnswer(data) {\n      this.rtcPeer.createAnswer().then((answer) => {\n        this.rtcPeer.setLocalDescription(answer).then(() => {\n          this.ws.send(JSON.stringify({\n            from: this.you,\n            to: data.from,\n            group: this.group,\n            type: 'answer',\n            description: answer,\n          }));\n\n          // eslint-disable-next-line no-console\n          console.log('rtc answer sent');\n        }).catch((error) => {\n          // eslint-disable-next-line no-console\n          console.log(error);\n        });\n      }).catch((error) => {\n        // eslint-disable-next-line no-console\n        console.log(error);\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\nvideo {\n  width: 100%;\n  height: auto;\n}\n</style>\n","import { render } from \"./RtcCamera.vue?vue&type=template&id=ec9c30be&scoped=true\"\nimport script from \"./RtcCamera.vue?vue&type=script&lang=js\"\nexport * from \"./RtcCamera.vue?vue&type=script&lang=js\"\n\nimport \"./RtcCamera.vue?vue&type=style&index=0&id=ec9c30be&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-ec9c30be\"\n\nexport default script","import { render } from \"./VideoChat.vue?vue&type=template&id=01600920&scoped=true\"\nimport script from \"./VideoChat.vue?vue&type=script&lang=js\"\nexport * from \"./VideoChat.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-01600920\"\n\nexport default script","import { render } from \"./Conference.vue?vue&type=template&id=eab7f3f4\"\nimport script from \"./Conference.vue?vue&type=script&lang=js\"\nexport * from \"./Conference.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./RtcCamera.vue?vue&type=style&index=0&id=ec9c30be&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TextWindow.vue?vue&type=style&index=0&id=5b29c1ba&lang=css\"","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar anObject = require('../internals/an-object');\nvar toObject = require('../internals/to-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar nativeObjectCreate = require('../internals/object-create');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternal = require('../internals/object-get-own-property-names-external');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar shared = require('../internals/shared');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar uid = require('../internals/uid');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineWellKnownSymbol = require('../internals/define-well-known-symbol');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\nvar $forEach = require('../internals/array-iteration').forEach;\n\nvar HIDDEN = sharedKey('hidden');\nvar SYMBOL = 'Symbol';\nvar PROTOTYPE = 'prototype';\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(SYMBOL);\nvar ObjectPrototype = Object[PROTOTYPE];\nvar $Symbol = global.Symbol;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;\nvar nativePropertyIsEnumerable = propertyIsEnumerableModule.f;\nvar AllSymbols = shared('symbols');\nvar ObjectPrototypeSymbols = shared('op-symbols');\nvar StringToSymbolRegistry = shared('string-to-symbol-registry');\nvar SymbolToStringRegistry = shared('symbol-to-string-registry');\nvar WellKnownSymbolsStore = shared('wks');\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDescriptor = DESCRIPTORS && fails(function () {\n  return nativeObjectCreate(nativeDefineProperty({}, 'a', {\n    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (O, P, Attributes) {\n  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);\n  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];\n  nativeDefineProperty(O, P, Attributes);\n  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {\n    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);\n  }\n} : nativeDefineProperty;\n\nvar wrap = function (tag, description) {\n  var symbol = AllSymbols[tag] = nativeObjectCreate($Symbol[PROTOTYPE]);\n  setInternalState(symbol, {\n    type: SYMBOL,\n    tag: tag,\n    description: description\n  });\n  if (!DESCRIPTORS) symbol.description = description;\n  return symbol;\n};\n\nvar isSymbol = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return Object(it) instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(O, P, Attributes) {\n  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);\n  anObject(O);\n  var key = toPrimitive(P, true);\n  anObject(Attributes);\n  if (has(AllSymbols, key)) {\n    if (!Attributes.enumerable) {\n      if (!has(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));\n      O[HIDDEN][key] = true;\n    } else {\n      if (has(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;\n      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });\n    } return setSymbolDescriptor(O, key, Attributes);\n  } return nativeDefineProperty(O, key, Attributes);\n};\n\nvar $defineProperties = function defineProperties(O, Properties) {\n  anObject(O);\n  var properties = toIndexedObject(Properties);\n  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));\n  $forEach(keys, function (key) {\n    if (!DESCRIPTORS || $propertyIsEnumerable.call(properties, key)) $defineProperty(O, key, properties[key]);\n  });\n  return O;\n};\n\nvar $create = function create(O, Properties) {\n  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(V) {\n  var P = toPrimitive(V, true);\n  var enumerable = nativePropertyIsEnumerable.call(this, P);\n  if (this === ObjectPrototype && has(AllSymbols, P) && !has(ObjectPrototypeSymbols, P)) return false;\n  return enumerable || !has(this, P) || !has(AllSymbols, P) || has(this, HIDDEN) && this[HIDDEN][P] ? enumerable : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {\n  var it = toIndexedObject(O);\n  var key = toPrimitive(P, true);\n  if (it === ObjectPrototype && has(AllSymbols, key) && !has(ObjectPrototypeSymbols, key)) return;\n  var descriptor = nativeGetOwnPropertyDescriptor(it, key);\n  if (descriptor && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) {\n    descriptor.enumerable = true;\n  }\n  return descriptor;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(O) {\n  var names = nativeGetOwnPropertyNames(toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (!has(AllSymbols, key) && !has(hiddenKeys, key)) result.push(key);\n  });\n  return result;\n};\n\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(O) {\n  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;\n  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (has(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || has(ObjectPrototype, key))) {\n      result.push(AllSymbols[key]);\n    }\n  });\n  return result;\n};\n\n// `Symbol` constructor\n// https://tc39.github.io/ecma262/#sec-symbol-constructor\nif (!NATIVE_SYMBOL) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor');\n    var description = !arguments.length || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var tag = uid(description);\n    var setter = function (value) {\n      if (this === ObjectPrototype) setter.call(ObjectPrototypeSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));\n    };\n    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });\n    return wrap(tag, description);\n  };\n\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return getInternalState(this).tag;\n  });\n\n  redefine($Symbol, 'withoutSetter', function (description) {\n    return wrap(uid(description), description);\n  });\n\n  propertyIsEnumerableModule.f = $propertyIsEnumerable;\n  definePropertyModule.f = $defineProperty;\n  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;\n  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;\n  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;\n\n  wrappedWellKnownSymbolModule.f = function (name) {\n    return wrap(wellKnownSymbol(name), name);\n  };\n\n  if (DESCRIPTORS) {\n    // https://github.com/tc39/proposal-Symbol-description\n    nativeDefineProperty($Symbol[PROTOTYPE], 'description', {\n      configurable: true,\n      get: function description() {\n        return getInternalState(this).description;\n      }\n    });\n    if (!IS_PURE) {\n      redefine(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });\n    }\n  }\n}\n\n$({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {\n  Symbol: $Symbol\n});\n\n$forEach(objectKeys(WellKnownSymbolsStore), function (name) {\n  defineWellKnownSymbol(name);\n});\n\n$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Symbol.for` method\n  // https://tc39.github.io/ecma262/#sec-symbol.for\n  'for': function (key) {\n    var string = String(key);\n    if (has(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];\n    var symbol = $Symbol(string);\n    StringToSymbolRegistry[string] = symbol;\n    SymbolToStringRegistry[symbol] = string;\n    return symbol;\n  },\n  // `Symbol.keyFor` method\n  // https://tc39.github.io/ecma262/#sec-symbol.keyfor\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');\n    if (has(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];\n  },\n  useSetter: function () { USE_SETTER = true; },\n  useSimple: function () { USE_SETTER = false; }\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {\n  // `Object.create` method\n  // https://tc39.github.io/ecma262/#sec-object.create\n  create: $create,\n  // `Object.defineProperty` method\n  // https://tc39.github.io/ecma262/#sec-object.defineproperty\n  defineProperty: $defineProperty,\n  // `Object.defineProperties` method\n  // https://tc39.github.io/ecma262/#sec-object.defineproperties\n  defineProperties: $defineProperties,\n  // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptors\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Object.getOwnPropertyNames` method\n  // https://tc39.github.io/ecma262/#sec-object.getownpropertynames\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // `Object.getOwnPropertySymbols` method\n  // https://tc39.github.io/ecma262/#sec-object.getownpropertysymbols\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\n$({ target: 'Object', stat: true, forced: fails(function () { getOwnPropertySymbolsModule.f(1); }) }, {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return getOwnPropertySymbolsModule.f(toObject(it));\n  }\n});\n\n// `JSON.stringify` method behavior with symbols\n// https://tc39.github.io/ecma262/#sec-json.stringify\nif ($stringify) {\n  var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails(function () {\n    var symbol = $Symbol();\n    // MS Edge converts symbol values to JSON as {}\n    return $stringify([symbol]) != '[null]'\n      // WebKit converts symbol values to JSON as null\n      || $stringify({ a: symbol }) != '{}'\n      // V8 throws on boxed symbols\n      || $stringify(Object(symbol)) != '{}';\n  });\n\n  $({ target: 'JSON', stat: true, forced: FORCED_JSON_STRINGIFY }, {\n    // eslint-disable-next-line no-unused-vars\n    stringify: function stringify(it, replacer, space) {\n      var args = [it];\n      var index = 1;\n      var $replacer;\n      while (arguments.length > index) args.push(arguments[index++]);\n      $replacer = replacer;\n      if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n      if (!isArray(replacer)) replacer = function (key, value) {\n        if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n        if (!isSymbol(value)) return value;\n      };\n      args[1] = replacer;\n      return $stringify.apply(null, args);\n    }\n  });\n}\n\n// `Symbol.prototype[@@toPrimitive]` method\n// https://tc39.github.io/ecma262/#sec-symbol.prototype-@@toprimitive\nif (!$Symbol[PROTOTYPE][TO_PRIMITIVE]) {\n  createNonEnumerableProperty($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n}\n// `Symbol.prototype[@@toStringTag]` property\n// https://tc39.github.io/ecma262/#sec-symbol.prototype-@@tostringtag\nsetToStringTag($Symbol, SYMBOL);\n\nhiddenKeys[HIDDEN] = true;\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\n\nvar defineProperty = Object.defineProperty;\nvar cache = {};\n\nvar thrower = function (it) { throw it; };\n\nmodule.exports = function (METHOD_NAME, options) {\n  if (has(cache, METHOD_NAME)) return cache[METHOD_NAME];\n  if (!options) options = {};\n  var method = [][METHOD_NAME];\n  var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;\n  var argument0 = has(options, 0) ? options[0] : thrower;\n  var argument1 = has(options, 1) ? options[1] : undefined;\n\n  return cache[METHOD_NAME] = !!method && !fails(function () {\n    if (ACCESSORS && !DESCRIPTORS) return true;\n    var O = { length: -1 };\n\n    if (ACCESSORS) defineProperty(O, 1, { enumerable: true, get: thrower });\n    else O[1] = 1;\n\n    method.call(O, argument0, argument1);\n  });\n};\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterOut }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_OUT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_OUT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push.call(target, value); // filterOut\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterOut` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterOut: createMethod(7)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND_INDEX);\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","// `Symbol.prototype.description` getter\n// https://tc39.github.io/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar has = require('../internals/has');\nvar isObject = require('../internals/is-object');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\n\nif (DESCRIPTORS && typeof NativeSymbol == 'function' && (!('description' in NativeSymbol.prototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var result = this instanceof SymbolWrapper\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;\n  symbolPrototype.constructor = SymbolWrapper;\n\n  var symbolToString = symbolPrototype.toString;\n  var native = String(NativeSymbol('test')) == 'Symbol(test)';\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  defineProperty(symbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = isObject(this) ? this.valueOf() : this;\n      var string = symbolToString.call(symbol);\n      if (has(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = native ? string.slice(7, -1) : string.replace(regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nexports.f = wellKnownSymbol;\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all fieldѕ are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete‥\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport &&\n          !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n"],"sourceRoot":""}